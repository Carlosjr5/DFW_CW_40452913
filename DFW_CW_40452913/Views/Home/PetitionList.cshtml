<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <allmain aria-labelledby="title">
          <div class="filter-wrapper">
                <label for="sortSelect">Sort by:</label>
                <select id="sortSelect">
                    <option value="mostVoted">Most Voted</option>
                    <option value="leastVoted">Least Voted</option>
                </select>
            </div>
        <div class="table-wrapper">
          
            <table class="table @ViewData["BWMode"]">
                <thead class="bw-mode">
                    <tr>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Votes</th>
                    </tr>
                </thead>
                <tbody id="petitionsList"></tbody>
            </table>
        </div>
    </allmain>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var samplePetitions = [
                {
                    "Title": "Urgent Call to Action: Protect Our Planet, Save Our Environment!",
                    "Author": "CJR",
                    "Votes": 10
                },
                {
                    "Title": "Equal Education for All",
                    "Author": "CJR",
                    "Votes": 5
                },
                {
                    "Title": "Demand Peace: Stop War and Conflict Worldwide",
                    "Author": "CJR",
                    "Votes": 8
                }
            ];

            var petitionsList = document.getElementById('petitionsList');

            function renderPetitions(petitions) {
                petitionsList.innerHTML = '';
                petitions.forEach(petition => {
                    var petitionRow = document.createElement('tr');
                    petitionRow.innerHTML = `
                                <td><a href="/Home/About#${petition.Title.replace(/\s+/g, '-').toLowerCase()}">${petition.Title}</a></td>
                                <td>${petition.Author}</td>
                                <td>${petition.Votes}</td>
                            `;
                    petitionsList.appendChild(petitionRow);
                });
            }

            function sortPetitions(sortBy) {
                if (sortBy === 'mostVoted') {
                    var sortedPetitions = samplePetitions.slice().sort((a, b) => b.Votes - a.Votes);
                    renderPetitions(sortedPetitions);
                } else if (sortBy === 'leastVoted') {
                    var sortedPetitions = samplePetitions.slice().sort((a, b) => a.Votes - b.Votes);
                    renderPetitions(sortedPetitions);
                }
            }

            document.getElementById('sortSelect').addEventListener('change', function (event) {
                var sortBy = event.target.value;
                sortPetitions(sortBy);
            });

            // Initial rendering
            renderPetitions(samplePetitions);
        });
    </script>

</body>
<footer class="plfooter">
    &copy; 2024 - iPétition - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
</footer>
</html>
